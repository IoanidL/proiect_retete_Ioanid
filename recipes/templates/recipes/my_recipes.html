{% extends 'base.html' %}
{% block content %}

<h2>Rețele mele</h2>
<div style="width: 100%; padding: 0; display: flex; flex-direction: column; gap: 1rem; ">
  {% if page_obj %}

      {% for recipe in page_obj %}

        <div style="width: fit-content; padding: 1rem; border: 1px solid #ccc; border-radius: 10px; background-color: #f9f9f9;">
            <div> <strong><a href="{% url 'recipe_detail' recipe.id %}">{{ recipe.title }}</a></strong> </div>
            <div> <strong> Timp total:</strong> {{ recipe.total_time }} minute </div>
            <div> <strong>Adăugat la:</strong> {{ recipe.addition_date }} </div>
            <div> <strong>Adăugat de:</strong> {{ recipe.user.username }} </div>
        </div>

      {% endfor %}

  {% else %}
    <p>Nu ai rețete adăugate.</p>
  {% endif %}

<div class="pagination">
  <span>Pagina {{ page_obj.number }} din {{ page_obj.paginator.num_pages }}</span>

  {% if page_obj.has_previous %}
    <a href="?page=1{% if sort %}&sort={{ sort }}{% endif %}">Prima pagină</a>
    <a href="?page={{ page_obj.previous_page_number }}{% if sort %}&sort={{ sort }}{% endif %}">Pagina anterioară</a>
  {% endif %}

  {% if page_obj.has_next %}
    <a href="?page={{ page_obj.next_page_number }}{% if sort %}&sort={{ sort }}{% endif %}">Pagina următoare</a>
    <a href="?page={{ page_obj.paginator.num_pages }}{% if sort %}&sort={{ sort }}{% endif %}">Ultima pagină</a>
  {% endif %}
</div>
<div style="margin-bottom: 1em;">
  <a href="?sort=title">
      <button {% if sort_by == 'title' %}style="font-weight:bold;"{% endif %}>
      Sortează alfabetic
      </button>
  </a>
  <a href="?sort=added">
      <button {% if sort_by == 'added' %}style="font-weight:bold;"{% endif %}>
        Sortează după data
      </button>
  </a>

</div>
</div>
{% endblock %}
